function IsJsonString(e){try{JSON.parse(e)}catch(e){return!1}return!0}var aud=new Audio,backgroundRangeVolume=function(){val=100*aud.volume;var e,n=document.querySelectorAll(".playerJs-volume");for(e=0;e<n.length;e++)n[e].style.background="-webkit-linear-gradient(left ,#000000 0%,#000000 "+val+"%,#d0d0d0 "+val+"%, #d0d0d0 100%)"};function loadsNone(){var e,n=document.querySelectorAll(".playerJs-load");for(e=0;e<n.length;e++)n[e].style.display="none"}function loadsVisible(){var e,n=document.querySelectorAll(".playerJs-load");for(e=0;e<n.length;e++)n[e].style.display=""}function playsNone(){var e,n=document.querySelectorAll(".button-play");for(e=0;e<n.length;e++)n[e].style.display="none"}function playsVisible(){var e,n=document.querySelectorAll(".button-play");for(e=0;e<n.length;e++)n[e].style.display=""}function pausesNone(){var e,n=document.querySelectorAll(".button-pause");for(e=0;e<n.length;e++)n[e].style.display="none"}function pausesVisible(){var e,n=document.querySelectorAll(".button-pause");for(e=0;e<n.length;e++)n[e].style.display=""}function mutesNone(){var e,n=document.querySelectorAll(".playerJs-mute");for(e=0;e<n.length;e++)n[e].style.display="none"}function mutesVisible(){var e,n=document.querySelectorAll(".playerJs-mute");for(e=0;e<n.length;e++)n[e].style.display=""}function unmutesNone(){var e,n=document.querySelectorAll(".playerJs-unmute");for(e=0;e<n.length;e++)mute=n[e],mute.style.display="none"}function unmutesVisible(){var e,n=document.querySelectorAll(".playerJs-unmute");for(e=0;e<n.length;e++)n[e].style.display=""}function stop(){aud.src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAVFYAAFRWAAABAAgAZGF0YQAAAAA="}aud.volume=.8,backgroundRangeVolume(),loadsNone(),STREAMS.forEach(function(e,n,t){var o=document.createElement("span");o.className="bitrate__count",o.innerHTML=e.bitrate,o.id=n,FILE=e.url,o.addEventListener("click",function(){if(1==IFRAMEURL)return goIFRAMEURL(FILE),stop(),!1;var t,o=document.querySelectorAll(".bitrate__count");for(t=0;t<o.length;t++)o[t].classList.remove("active");document.getElementById(n).classList.add("active"),aud.src=e.url,aud.play(),console.log(aud.src)}),document.getElementById("qualities").appendChild(o)}),aud.onloadstart=function(){},aud.onprogress=function(){},aud.onsuspend=function(){},aud.onabort=function(){},aud.onerror=function(){if("data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAVFYAAFRWAAABAAgAZGF0YQAAAAA="==aud.src)return!1;switch(aud.error.code){case aud.error.MEDIA_ERR_ABORTED:alert("Wiedergabe wurde vom Benutzer abgebrochen.");break;case aud.error.MEDIA_ERR_NETWORK:alert("Netzwerkfehler, Herunterladen der Mediendatei gestoppt.");break;case aud.error.MEDIA_ERR_DECODE:alert("Die Wiedergabe von Mediendateien wird unterbrochen, da Elemente vorhanden sind, die vom Browser nicht dekodiert werden können.")}},aud.onemptied=function(){},aud.onstalled=function(){},aud.onloadedmetadata=function(){},aud.onloadeddata=function(){},aud.oncanplay=function(){},aud.oncanplaythrough=function(){},aud.onplay=function(){playsVisible(),loadsVisible(),pausesNone()},aud.onplaying=function(){loadsNone(),playsNone(),pausesVisible()},aud.onwaiting=function(){},aud.onseeking=function(){},aud.onseeked=function(){},aud.onended=function(){console.log("ended",aud.networkState)},aud.ondurationchange=function(){},aud.onpause=function(){pausesNone(),playsVisible(),stop()},aud.onratechange=function(){},aud.onresize=function(){},aud.onvolumechange=function(){backgroundRangeVolume()};var myPlay=function(){if(1==IFRAMEURL)return goIFRAMEURL(FILE),stop(),!1;""!=aud.src&&"data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAVFYAAFRWAAABAAgAZGF0YQAAAAA="!=aud.src||(document.getElementById("0").classList.add("active"),aud.src=STREAMS[0].url),aud.play()},myStop=function(){var e,n=document.querySelectorAll(".bitrate__count");for(e=0;e<n.length;e++)n[e].classList.remove("active");aud.pause()},myUnmute=function(){unmutesNone(),mutesVisible(),aud.muted=!0},myMute=function(){unmutesVisible(),mutesNone(),aud.muted=!1};function gooPl(){PL_ALIAS?location.href=URL_ALIAS:alert("У этой радиостанции нет плейлиста")}function addFavorite(){window.FAV=1,$.ajax({url:ajax_url,type:"POST",data:{id:ID,action:"favorite"},success:function(e){$("#favorite").html(e)}})}function removeFavorite(){window.FAV=0,$.ajax({url:ajax_url,type:"POST",data:{id:ID,action:"favorite"},success:function(e){$("#favorite").html(e)}})}function goIFRAMEURL(e){window.open(e,"MyWin","menubar=yes,width=528,height=794")}var buttons=document.querySelectorAll(".button-play");for(index=0;index<buttons.length;index++)(button=buttons[index]).addEventListener("click",myPlay);buttons=document.querySelectorAll(".button-pause");for(index=0;index<buttons.length;index++)(button=buttons[index]).addEventListener("click",myStop);buttons=document.querySelectorAll(".playerJs-unmute");for(index=0;index<buttons.length;index++)(button=buttons[index]).addEventListener("click",myUnmute);buttons=document.querySelectorAll(".playerJs-mute");for(index=0;index<buttons.length;index++)(button=buttons[index]).addEventListener("click",myMute);var index,button;buttons=document.querySelectorAll(".playerJs-volume");for(index=0;index<buttons.length;index++)(button=buttons[index]).addEventListener("mousemove",function(){aud.volume=this.value});

jQuery(document).ready(function($){

            if( PL_ALIAS )
            {
                $.ajax({
                    url: ajax_url,
                    type:"POST",
                    data: {
                        action: 'playlist',
                        id: PL_ID
                    },
                    beforeSend: function()
                    {
                        $('.playlist-loading__data').show();
                        $('.tracklist-loading__data').show();
                    },
                    success: function( dt )
                    {
                        if( typeof dt.playlist !== 'undefined' )
                        {
                            $('#PlaylistData').html(dt.playlist);

                            $('#PlaylistData .date').filter('.update').each(function(index) {
                                data = new Date($(this).data('date'));
                                data = (data.getHours() < 10 ? '0' + data.getHours() : data.getHours()) + ":" + (data.getMinutes() < 10 ? '0' : '') + data.getMinutes();
                                $(this).html(data);
                            });

                            $('.pl-list__item').append("<a href=\""+url_pl_link+"\" class=\"playlist__more\"><span class=\"playlist__more-text\">Смотреть весь плейлист</span><svg width=\"16\" height=\"8\" class=\"playlist__more-arrow\" viewBox=\"0 0 16 8\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M15.3536 4.35355C15.5488 4.15829 15.5488 3.84171 15.3536 3.64645L12.1716 0.464467C11.9763 0.269205 11.6597 0.269205 11.4645 0.464467C11.2692 0.659729 11.2692 0.976312 11.4645 1.17157L14.2929 4L11.4645 6.82843C11.2692 7.02369 11.2692 7.34027 11.4645 7.53553C11.6597 7.7308 11.9763 7.7308 12.1716 7.53553L15.3536 4.35355ZM-4.37114e-08 4.5L15 4.5L15 3.5L4.37114e-08 3.5L-4.37114e-08 4.5Z\" fill=\"#225FA8\"></path></svg></a>");
                        }

                        if( typeof dt.tracklist !== 'undefined' )
                        {
                            $('#TracklistData').html(dt.tracklist);

                            $('.tr-list__item').append("<a href=\""+url_tr_link+"\" class=\"playlist__more\"><span class=\"playlist__more-text--orange\">Смотреть все треки</span><svg class=\"playlist__more-arrow\" width=\"16\" height=\"8\" viewBox=\"0 0 16 8\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M15.3536 4.35355C15.5488 4.15829 15.5488 3.84171 15.3536 3.64645L12.1716 0.464467C11.9763 0.269205 11.6597 0.269205 11.4645 0.464467C11.2692 0.659729 11.2692 0.976312 11.4645 1.17157L14.2929 4L11.4645 6.82843C11.2692 7.02369 11.2692 7.34027 11.4645 7.53553C11.6597 7.7308 11.9763 7.7308 12.1716 7.53553L15.3536 4.35355ZM-4.37114e-08 4.5L15 4.5L15 3.5L4.37114e-08 3.5L-4.37114e-08 4.5Z\" fill=\"#FF6000\"></path></svg></a>");
                        }

                        if( !dt.playlist || !dt.tracklist )
                        {
                            $('.pltr-list').hide();
                        }

                        $('.playlist-loading__data').hide();
                        $('.tracklist-loading__data').hide();
                    }
                })
            }

            $(".open__city__list").on("click",function(){$(".open__city__list").hasClass("opened")?($(".open__city__list").removeClass("opened"),$(".broadcasting").addClass("hide_list"),$(".open__city__list").text("Все города...")):($(".open__city__list").addClass("opened"),$(".broadcasting").removeClass("hide_list"),$(".open__city__list").text("Скрыть список"))}),$.ajax({url:ajax_url,type:"POST",data:{id:$('input[name="fav"]').val(),action:"count_likes"},beforeSend:function(){$(".walkman-player__likes").hide(),$(".walkman-player__likes-loading").show()},success:function(e){$(".walkman-player__likes-count").html(e),$(".walkman-player__likes").show(),$(".walkman-player__likes-loading").hide()}});var e=jQuery(".stars").find("span");e.on("touchend click",function(e){var a=jQuery(this).data("description");jQuery(this).parent().parent().find(".rating-description").html(a).data("old-text",a),jQuery(this).parent().children().removeClass("active active2 active-disabled"),jQuery(this).prevAll().addClass("active"),jQuery(this).addClass("active"),jQuery("#rating_select").val(jQuery(this).data("rating"))}),e.hover(function(){var e=jQuery(this).parent().parent().find(".rating-description");e.data("old-text",e.html()),e.html(jQuery(this).data("description")),jQuery(this).addClass("active2").removeClass("active-disabled"),jQuery(this).prevAll().addClass("active2").removeClass("active-disabled"),jQuery(this).nextAll().removeClass("active2").addClass("active-disabled")},function(){var e=jQuery(this).parent().parent().find(".rating-description");e.html(e.data("old-text")),jQuery(this).parent().children().removeClass("active2 active-disabled")}),$(".send_review_form").on("click",function(){$(".status_info").hide();var e=$(".form__name").val(),a=$(".form__email").val(),t=$("#rating_select").val(),s=$(".form__comment").val();e?$(".fm_name").removeClass("error"):$(".fm_name").addClass("error"),a?0==/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a)?($(".fm_email").removeClass("error"),$(".fm_email").addClass("error2")):($(".fm_email").removeClass("error"),$(".fm_email").removeClass("error2")):$(".fm_email").addClass("error"),t?($(".fm_rating").removeClass("error"),$(".rating-description").show(),$(".rating-description-error").hide()):($(".fm_rating").addClass("error"),$(".rating-description").hide(),$(".rating-description-error").show()),s?$(".fm_text").removeClass("error"):$(".fm_text").addClass("error"),$(".fm_item").hasClass("error")||$.ajax({url:ajax_url,type:"POST",data:{action:"addreview",radio_id:"{{ $radio->id }}",name:e,email:a,rating:t,text:s},beforeSend:function(){$(".no_btn_loader").hide(),$(".yes_btn_loader").show()},success:function(e){$(".no_btn_loader").show(),$(".yes_btn_loader").hide(),"success"==e.status?($(".form__name").val(""),$(".form__email").val(""),$("#rating_select").val(""),$(".form__comment").val(""),$(".stars > span").removeClass("active"),$(".rating-description").text("Пожалуйста, оцените по 5 бальной шкале"),$(".status_info").text(e.text),$(".status_info").addClass("success")):($(".status_info").text(e.text),$(".status_info").addClass("error")),$(".status_info").show(),setTimeout(function(){$(".status_info").hide()},1e4)}})}),$(".reviews__button").on("click",function(){return $(this).hide(),$(".recall").removeClass("hide__formrev"),!1})});
